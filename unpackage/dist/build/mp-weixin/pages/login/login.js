(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"0843":function(n,o,e){},"18af":function(n,o,e){"use strict";e.r(o);var t=e("dc09"),i=e.n(t);for(var c in t)"default"!==c&&function(n){e.d(o,n,(function(){return t[n]}))}(c);o["default"]=i.a},"2a31":function(n,o,e){"use strict";(function(n){e("308d");t(e("66fd"));var o=t(e("9dab"));function t(n){return n&&n.__esModule?n:{default:n}}n(o.default)}).call(this,e("543d")["createPage"])},8261:function(n,o,e){"use strict";var t=e("0843"),i=e.n(t);i.a},"9dab":function(n,o,e){"use strict";e.r(o);var t=e("ed54"),i=e("18af");for(var c in i)"default"!==c&&function(n){e.d(o,n,(function(){return i[n]}))}(c);e("8261");var a,s=e("f0c5"),d=Object(s["a"])(i["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],a);o["default"]=d.exports},dc09:function(n,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var t={data:function(){return{clientid:null,info:{},loading:!1,disable:"",adshow:!1,loginText:"点击观看广告并登录",videoAd:null}},onLoad:function(n){console.log("login onload...");var o=decodeURIComponent(n.q);console.log(n);var e=o.indexOf("=");console.log(e);var t=o.substr(e+1);this.clientid=t,this.info=this.$store.state,wx.createRewardedVideoAd&&(this.videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-414e4f5508476e77"}),this.videoAd.onLoad((function(){console.log("ad loaded...")})),this.videoAd.onError((function(n){console.log("ad err...")})),this.videoAd.onClose((function(n){n&&n.isEnded?wx.showModal({title:"提示",content:"广告播放完成,感谢您的鼓励,将跳转到首页",showCancel:!1,success:function(n){n.confirm&&wx.redirectTo({url:"/pages/index/index"})}}):wx.showModal({title:"提示",content:"由于您提前关闭了视频广告,我们将无法取得任何服务经费",showCancel:!1,success:function(n){n.confirm&&wx.redirectTo({url:"/pages/index/index"})}})})))},methods:{handleGetUserInfo:function(n){var o=this,e=this;null!=e.clientid?null!=e.$store.state.openid?(e.loading=!0,e.disable="disabled",this.videoAd&&this.videoAd.show().catch((function(){o.videoAd.load().then((function(){return o.videoAd.show()})).catch((function(n){console.log("激励视频 广告显示失败")}))})),console.log("handle..."),wx.getSetting({success:function(o){console.log("res",o.authSetting["scope.userInfo"]),o.authSetting["scope.userInfo"]?(console.log("自动授权"),wx.request({url:"https://admin.jiasu.zhifool.com/api/v1/weixin/micrologin",data:{openid:e.$store.state.openid,nickname:n.detail.userInfo.nickName,avatarurl:n.detail.userInfo.avatarUrl,clientid:e.clientid},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(n){0==n.data.Sta&&wx.showModal({title:"提示",content:n.data.Msg,showCancel:!1,success:function(n){}})}})):wx.authorize({scope:"scope.userInfo",success:function(){console.log("手动授权")},fail:function(){wx.showModal({title:"提示",content:"需要获得授权才能登录",showCancel:!1,success:function(n){}})}})}})):wx.showModal({title:"提示",content:"稍等,数据还未准备完成",showCancel:!1,success:function(n){}}):wx.showModal({title:"提示",content:"clientid未准备好,请重新扫码",showCancel:!1,success:function(n){}})},login:function(){console.log("login...");var n=this;n.loading=!0,n.disable="disabled"},loginDo:function(){console.log("loginDo...");var n=this;wx.getUserInfo({success:function(o){n.info.nickName=o.userInfo.nickName,n.info.avatarUrl=o.userInfo.avatarUrl,wx.request({url:"https://admin.jiasu.zhifool.com/api/v1/weixin/micrologin",data:{openid:n.$store.state.openid,nickname:n.info.nickName,avatarurl:n.info.avatarUrl,clientid:n.clientid},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(n){wx.showModal({title:"提示",content:n.data.Msg,showCancel:!1,success:function(n){n.confirm&&wx.redirectTo({url:"/pages/index/index"})}})}})}})}}};o.default=t},ed54:function(n,o,e){"use strict";var t,i=function(){var n=this,o=n.$createElement;n._self._c},c=[];e.d(o,"b",(function(){return i})),e.d(o,"c",(function(){return c})),e.d(o,"a",(function(){return t}))}},[["2a31","common/runtime","common/vendor"]]]);
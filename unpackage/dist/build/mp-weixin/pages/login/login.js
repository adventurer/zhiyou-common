(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"0843":function(n,e,o){},"18af":function(n,e,o){"use strict";o.r(e);var t=o("dc09"),i=o.n(t);for(var a in t)"default"!==a&&function(n){o.d(e,n,(function(){return t[n]}))}(a);e["default"]=i.a},"2a31":function(n,e,o){"use strict";(function(n){o("308d");t(o("66fd"));var e=t(o("9dab"));function t(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,o("543d")["createPage"])},"58e4":function(n,e,o){"use strict";var t,i=function(){var n=this,e=n.$createElement;n._self._c},a=[];o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return t}))},8261:function(n,e,o){"use strict";var t=o("0843"),i=o.n(t);i.a},"9dab":function(n,e,o){"use strict";o.r(e);var t=o("58e4"),i=o("18af");for(var a in i)"default"!==a&&function(n){o.d(e,n,(function(){return i[n]}))}(a);o("8261");var c,s=o("f0c5"),l=Object(s["a"])(i["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],c);e["default"]=l.exports},dc09:function(n,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={data:function(){return{clientid:null,info:{},loading:!1,disable:""}},onLoad:function(n){console.log("login onload run..."),console.log(this);var e=decodeURIComponent(n.q);console.log(e);var o=e.indexOf("="),t=e.substr(o+1);this.clientid=t,this.info=this.$store.state},methods:{handleGetUserInfo:function(n){var e=this;null!=e.$store.state.openid?(e.loading=!0,e.disable="disabled",console.log("handle..."),wx.getSetting({success:function(o){console.log("res",o.authSetting["scope.userInfo"]),o.authSetting["scope.userInfo"]?(console.log("自动授权"),wx.request({url:"https://admin.jiasu.zhifool.com/api/v1/weixin/micrologin",data:{openid:e.$store.state.openid,nickname:n.detail.userInfo.nickName,avatarurl:n.detail.userInfo.avatarUrl,clientid:e.clientid},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(n){wx.showModal({title:"提示",content:n.data.Msg,showCancel:!1,success:function(n){n.confirm&&wx.redirectTo({url:"/pages/index/index"})}})}})):wx.authorize({scope:"scope.userInfo",success:function(){console.log("手动授权")},fail:function(){wx.showModal({title:"提示",content:"需要获得授权才能登录",showCancel:!1,success:function(n){}})}})}})):wx.showModal({title:"提示",content:"稍等,数据还未准备完成",showCancel:!1,success:function(n){}})},login:function(){console.log("login...");var n=this;n.loading=!0,n.disable="disabled"},loginDo:function(){console.log("loginDo...");var n=this;wx.getUserInfo({success:function(e){n.info.nickName=e.userInfo.nickName,n.info.avatarUrl=e.userInfo.avatarUrl,wx.request({url:"https://admin.jiasu.zhifool.com/api/v1/weixin/micrologin",data:{openid:n.$store.state.openid,nickname:n.info.nickName,avatarurl:n.info.avatarUrl,clientid:n.clientid},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(n){wx.showModal({title:"提示",content:n.data.Msg,showCancel:!1,success:function(n){n.confirm&&wx.redirectTo({url:"/pages/index/index"})}})}})}})}}};e.default=t}},[["2a31","common/runtime","common/vendor"]]]);
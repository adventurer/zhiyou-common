(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"0843":function(n,e,o){},"18af":function(n,e,o){"use strict";o.r(e);var t=o("dc09"),i=o.n(t);for(var c in t)"default"!==c&&function(n){o.d(e,n,(function(){return t[n]}))}(c);e["default"]=i.a},"2a31":function(n,e,o){"use strict";(function(n){o("308d");t(o("66fd"));var e=t(o("9dab"));function t(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,o("543d")["createPage"])},8261:function(n,e,o){"use strict";var t=o("0843"),i=o.n(t);i.a},"9dab":function(n,e,o){"use strict";o.r(e);var t=o("fec1"),i=o("18af");for(var c in i)"default"!==c&&function(n){o.d(e,n,(function(){return i[n]}))}(c);o("8261");var a,s=o("f0c5"),l=Object(s["a"])(i["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],a);e["default"]=l.exports},dc09:function(n,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={data:function(){return{clientid:null,info:{},loading:!1,disable:"",adshow:!1,loginText:"点击观看广告并登录",videoAd:null}},onLoad:function(n){console.log("login onload...");var e=decodeURIComponent(n.q);console.log(n);var o=e.indexOf("=");console.log(o);var t=e.substr(o+1);this.clientid=t,this.info=this.$store.state,wx.createRewardedVideoAd&&(this.videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-414e4f5508476e77"}),this.videoAd.onLoad((function(){console.log("ad loaded...")})),this.videoAd.onError((function(n){wx.showModal({title:"提示",content:n.errMsg,showCancel:!1,success:function(n){n.confirm&&wx.redirectTo({url:"/pages/index/index"})}})})),this.videoAd.onClose((function(n){n&&n.isEnded?wx.showModal({title:"提示",content:"广告播放完成,感谢您的鼓励,将跳转到首页",showCancel:!1,success:function(n){n.confirm&&wx.redirectTo({url:"/pages/index/index"})}}):wx.showModal({title:"提示",content:"由于您提前关闭了视频广告,我们将无法取得任何服务经费",showCancel:!1,success:function(n){n.confirm&&wx.redirectTo({url:"/pages/index/index"})}})})))},methods:{handleGetUserInfo:function(n){var e=this,o=this;null!=o.clientid?null!=o.$store.state.openid?(o.loading=!0,o.disable="disabled",this.videoAd&&this.videoAd.show().catch((function(){e.videoAd.load().then((function(){return e.videoAd.show()})).catch((function(n){console.log("激励视频 广告显示失败")}))})),console.log("handle..."),wx.getSetting({success:function(e){console.log("res",e.authSetting["scope.userInfo"]),e.authSetting["scope.userInfo"]?(console.log("自动授权"),wx.request({url:"https://admin.jiasu.zhifool.com/api/v1/weixin/micrologin",data:{openid:o.$store.state.openid,nickname:n.detail.userInfo.nickName,avatarurl:n.detail.userInfo.avatarUrl,clientid:o.clientid},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(n){0==n.data.Sta&&wx.showModal({title:"提示",content:n.data.Msg,showCancel:!1,success:function(n){}})}})):wx.authorize({scope:"scope.userInfo",success:function(){console.log("手动授权")},fail:function(){wx.showModal({title:"提示",content:"需要获得授权才能登录",showCancel:!1,success:function(n){}})}})}})):wx.showModal({title:"提示",content:"稍等,数据还未准备完成",showCancel:!1,success:function(n){}}):wx.showModal({title:"提示",content:"clientid未准备好,请重新扫码",showCancel:!1,success:function(n){}})},login:function(){console.log("login...");var n=this;n.loading=!0,n.disable="disabled"},loginDo:function(){console.log("loginDo...");var n=this;wx.getUserInfo({success:function(e){n.info.nickName=e.userInfo.nickName,n.info.avatarUrl=e.userInfo.avatarUrl,wx.request({url:"https://admin.jiasu.zhifool.com/api/v1/weixin/micrologin",data:{openid:n.$store.state.openid,nickname:n.info.nickName,avatarurl:n.info.avatarUrl,clientid:n.clientid},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(n){wx.showModal({title:"提示",content:n.data.Msg,showCancel:!1,success:function(n){n.confirm&&wx.redirectTo({url:"/pages/index/index"})}})}})}})}}};e.default=t},fec1:function(n,e,o){"use strict";var t,i=function(){var n=this,e=n.$createElement;n._self._c},c=[];o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return c})),o.d(e,"a",(function(){return t}))}},[["2a31","common/runtime","common/vendor"]]]);